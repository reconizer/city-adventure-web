.adventure-publishment
  &__header
    position: absolute
    left: 1.5rem
    right: 1.5rem
    top: 6rem
    height: 4rem
    border: 1px solid $border-color
    border-radius: 0.25rem
    box-sizing: border-box
    display: flex
    align-items: center
    padding: 0 1rem

  &__summary
    flex: 1
    padding-right: 1rem
    white-space: pre-line

  &__action
    flex-shrink: 0

    & + &
      margin-left: 1rem

  &__header + &__history
    top: 11rem

  &__history
    position: absolute
    left: 1.5rem
    right: 1.5rem
    bottom: 1rem
    top: 6rem
    overflow-y: auto
    border: 1px solid $border-color
    padding: 1rem
    border-radius: 0.25rem

  &__history--with-messaging
    bottom: 7rem
    border-bottom-left-radius: 0
    border-bottom-right-radius: 0

  &__history--with-messaging + &__form
    display: block

  &__form
    display: none
    position: absolute
    left: 1.5rem
    right: 1.5rem
    bottom: 1rem
    height: 6rem
    border-left: 1px solid $border-color
    border-right: 1px solid $border-color
    border-bottom: 1px solid $border-color
    border-bottom-left-radius: 0.25rem
    border-bottom-right-radius: 0.25rem
    overflow: hidden

  &__input
    border: none
    position: relative
    min-height: 100% !important
    background: none
    padding: 1rem
    resize: none

.publishment-history-item
  display: flex
  justify-content: center
  align-items: center
  position: relative

  // Line
  &:after
    content: ''
    position: absolute
    width: 0.1875rem
    height: 1.25rem
    left: 1rem
    bottom: -1.25rem
    background-color: $clue-background

  &__content-wrapper
    display: flex
    flex: 1

  &__content
    border-radius: 0.75rem
    background-color: $clue-background
    border: 1px solid $point-background
    padding: 0.5rem 0.75rem
    white-space: pre-line

  &__date
    opacity: 0
    font-size: 0.875rem
    color: $gray-font
    order: 1
    flex-shrink: 0
    margin-left: 3rem

  &:hover &__date
    opacity: 1

  &__sender
    border-radius: 999em
    background-color: $clue-background
    border: 1px solid $point-background
    width: 2rem
    height: 2rem
    margin-right: 0.5rem
    text-align: center
    line-height: 2rem
    font-size: 0.875rem
    flex-shrink: 0

  &--status &__sender
    display: none

  &--status &__date
    opacity: 1

  &--status &__content
    border-radius: 0.25rem
    border-color: $clue-background
    border-left: 0.25rem solid $clue-background

  &--received-message, &--sender-message
    margin-left: 2rem

    &:after
      left: -1rem
      bottom: -2rem
      top: 0
      height: auto

  &--sender-message &__date
    order: -1
    margin-right: 3rem
    margin-left: 0

  &--sender-message &__content-wrapper
    margin-left: auto
    justify-content: end

  &--sender-message &__content
    background-color: $pink
    border-color: $pink
    color: white

  &--sender-message &__sender
    order: 1
    margin-left: 0.5rem
    margin-right: 0

  & + &
    margin-top: 1.25rem

  &:last-child
    padding-bottom: 1rem

    &:after
      display: none

  &--sender-message:last-child,
  &--received-message:last-child
    &:after
      display: block
      bottom: 1rem

  // Same type of messages has smaller margins between,
  // and only first user avatar is shown
  &--received-message + &--received-message,
  &--sender-message + &--sender-message
    margin-top: 0.5rem

    .publishment-history-item__sender
      opacity: 0

  // Colors for identifying different status changes
  &--status-review-request &__content
    border-left-color: $orange

  &--status-accepted &__content,
  &--status-published &__content
    border-left-color: $green

  &--status-rejected &__content,
  &--status-cancelled &__content
    border-left-color: $red

  &--status-created &__content,
  &--status-back-to-edit &__content
    border-left-color: $black
